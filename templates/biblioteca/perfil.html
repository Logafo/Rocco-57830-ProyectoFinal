<!-- templates/biblioteca/perfil.html -->

{% extends 'biblioteca/base.html' %}

{% block content %}
<h2>Perfil de {{ request.user.username }}</h2>

<!-- Mostrar la imagen de perfil -->
{% if request.user.perfil.imagen %}
    <img src="{{ request.user.perfil.imagen.url }}" alt="Imagen de Perfil" class="img-thumbnail" width="150">
{% else %}
    <p>No tienes una imagen de perfil cargada.</p>
{% endif %}

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <fieldset>
        <legend>Actualizar Perfil</legend>
        {{ perfil_form.as_p }}
        <button type="submit" name="update_profile" class="btn btn-primary">Guardar Cambios</button>
    </fieldset>
</form>

<form method="post">
    {% csrf_token %}
    <fieldset>
        <legend>Cambiar Contraseña</legend>
        {{ password_form.as_p }}
        <button type="submit" name="change_password" class="btn btn-secondary">Cambiar Contraseña</button>
    </fieldset>
</form>
{% endblock %}
